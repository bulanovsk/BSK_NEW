<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Задания - BSK Education</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        /* Шапка */
        header {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(45deg, #fff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-link:hover, .nav-link.active {
            color: #ffd700;
        }

        /* Основной контент */
        .tasks-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 6rem 2rem 2rem;
        }

        .page-header {
            text-align: center;
            margin-bottom: 3rem;
            animation: slideUp 0.8s ease-out;
        }

        .page-title {
            font-size: 2.8rem;
            font-weight: 800;
            background: linear-gradient(45deg, #fff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .page-subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
        }

        /* Шаги навигации */
        .steps-navigation {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.6;
        }

        .step.active {
            opacity: 1;
        }

        .step-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .step.active .step-circle {
            background: linear-gradient(45deg, #ff6b9d, #ff1493);
            border-color: #ff1493;
            transform: scale(1.1);
        }

        .step-label {
            font-weight: 600;
            text-align: center;
        }

        /* Сетки выбора */
        .selection-grid {
            display: grid;
            gap: 2rem;
            animation: slideUp 0.8s ease-out;
        }

        .subject-grid {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .level-grid {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        .topic-grid {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        }

        .selection-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 2.5rem;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
        }

        .selection-card:hover {
            transform: translateY(-5px);
            border-color: #ffd700;
            background: rgba(255, 255, 255, 0.15);
        }

        .selection-icon {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            color: #ffd700;
        }

        .selection-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: white;
        }

        .selection-description {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.5;
        }

        /* Карточка задания */
        .task-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 3rem;
            border-radius: 25px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 2rem;
            animation: slideUp 0.8s ease-out 0.2s both;
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 2rem;
        }

        .task-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .task-tag {
            padding: 0.5rem 1.2rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
            border: 1px solid #ffd700;
        }

        .task-tag.ege {
            background: rgba(255, 107, 157, 0.2);
            color: #ff6b9d;
            border: 1px solid #ff6b9d;
        }

        .task-tag.oge {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            border: 1px solid #4CAF50;
        }

        .task-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            margin-bottom: 1.5rem;
            line-height: 1.4;
        }

        .task-description {
            background: rgba(255, 255, 255, 0.05);
            padding: 2rem;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .task-description p {
            margin-bottom: 1rem;
        }

        .task-description p:last-child {
            margin-bottom: 0;
        }

        .task-example {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 1rem;
            border-left: 4px solid #ffd700;
        }

        /* Форма ответа */
        .answer-form {
            margin-top: 2rem;
        }

        .answer-options {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .answer-option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.2rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .answer-option:hover {
            border-color: #ffd700;
            background: rgba(255, 255, 255, 0.1);
        }

        .answer-option.selected {
            border-color: #ff6b9d;
            background: rgba(255, 107, 157, 0.1);
        }

        .answer-option input {
            transform: scale(1.2);
            accent-color: #ff6b9d;
        }

        .answer-label {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .submit-button {
            width: 100%;
            padding: 1.2rem;
            background: linear-gradient(45deg, #ff6b9d, #ff1493);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .submit-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 20, 147, 0.4);
        }

        .submit-button:disabled {
            background: rgba(255, 255, 255, 0.2);
            cursor: not-allowed;
        }

        /* Поле для ввода ответа */
        .answer-input-container {
            margin-bottom: 2rem;
        }

        .answer-input {
            width: 100%;
            padding: 1.2rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .answer-input:focus {
            outline: none;
            border-color: #ffd700;
            background: rgba(255, 255, 255, 0.15);
        }

        .answer-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .input-hint {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
        }

        /* Результат */
        .result-message {
            margin-top: 2rem;
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            font-weight: 600;
            display: none;
        }

        .result-correct {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid #4CAF50;
            color: #4CAF50;
        }

        .result-incorrect {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid #F44336;
            color: #F44336;
        }

        /* Кнопка назад */
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.8rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
        }

        .back-button:hover {
            border-color: #ffd700;
            background: rgba(255, 255, 255, 0.15);
        }

        /* Уведомление */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            border-left: 4px solid #ff1493;
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        /* Скрытие секций */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Математические формулы */
        .math-formula {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            margin: 0.5rem 0;
            display: inline-block;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .math-explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 1rem;
            border-left: 4px solid #4CAF50;
        }

        .math-step {
            margin: 0.5rem 0;
            padding: 0.5rem;
        }

        /* Стили для изображений формул */
        .formula-image {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .formula-image img {
            max-width: 100%;
            height: auto;
            filter: invert(1) brightness(2);
            background: transparent;
        }

        .formula-latex {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            font-size: 1.8rem;
            color: white;
            margin: 1rem 0;
            text-align: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Стили для физических изображений */
        .physics-image {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .physics-image img {
            max-width: 100%;
            height: auto;
            max-height: 300px;
            filter: invert(1) brightness(2) contrast(1.2);
            background: transparent;
        }

        /* Стили для геометрических изображений */
        .geometry-image {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .geometry-image img {
            max-width: 100%;
            height: auto;
            max-height: 300px;
            filter: invert(1) brightness(2) contrast(1.2);
            background: transparent;
        }

        .geometry-diagram {
            font-family: 'Times New Roman', serif;
            color: white;
            margin: 1rem 0;
            text-align: center;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Анимации */
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .tasks-container {
                padding: 5rem 1rem 1rem;
            }

            .steps-navigation {
                gap: 1rem;
            }

            .step-circle {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            .selection-grid {
                grid-template-columns: 1fr;
            }

            .task-card {
                padding: 2rem;
            }

            .page-title {
                font-size: 2.2rem;
            }

            .task-title {
                font-size: 1.5rem;
            }

            .nav-links {
                gap: 1rem;
            }

            .formula-latex {
                font-size: 1.4rem;
                padding: 0.8rem;
            }

            .physics-image, .geometry-image {
                padding: 1rem;
            }

            .physics-image img, .geometry-image img {
                max-height: 200px;
            }
        }

        @media (max-width: 480px) {
            .nav-container {
                padding: 0 1rem;
            }

            .page-title {
                font-size: 1.8rem;
            }

            .task-card {
                padding: 1.5rem;
            }

            .task-meta {
                flex-direction: column;
                gap: 0.5rem;
            }

            .formula-latex {
                font-size: 1.2rem;
                padding: 0.6rem;
            }

            .physics-image, .geometry-image {
                padding: 0.5rem;
            }

            .physics-image img, .geometry-image img {
                max-height: 150px;
            }
        }
    </style>
</head>
<body>
    <!-- Уведомление -->
    <div class="notification" id="notification" role="alert" aria-live="polite">
        <div id="notificationMessage"></div>
    </div>

    <!-- Шапка -->
    <header>
        <div class="nav-container">
            <a href="index.html" class="logo">BSK Education</a>
            <div class="nav-links">
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-home"></i>Главная
                </a>
                <a href="tasks.html" class="nav-link active">
                    <i class="fas fa-tasks"></i>Задания
                </a>
                <a href="profile.html" class="nav-link">
                    <i class="fas fa-user"></i>Профиль
                </a>
                <a href="help.html" class="nav-link">
                    <i class="fas fa-question-circle"></i>Помощь
                </a>
            </div>
        </div>
    </header>

    <!-- Основной контент -->
    <div class="tasks-container">
        <!-- Заголовок -->
        <div class="page-header">
            <h1 class="page-title">Система заданий</h1>
            <p class="page-subtitle">Выберите предмет и тему для начала решения</p>
        </div>

        <!-- Навигация по шагам -->
        <div class="steps-navigation">
            <div class="step active" data-step="1">
                <div class="step-circle">
                    <i class="fas fa-book"></i>
                </div>
                <div class="step-label">Предмет</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-circle">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="step-label">Уровень</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-circle">
                    <i class="fas fa-folder"></i>
                </div>
                <div class="step-label">Тема</div>
            </div>
            <div class="step" data-step="4">
                <div class="step-circle">
                    <i class="fas fa-tasks"></i>
                </div>
                <div class="step-label">Задание</div>
            </div>
        </div>

        <!-- Шаг 1: Выбор предмета -->
        <div class="section active" id="step1">
            <div class="selection-grid subject-grid">
                <div class="selection-card" onclick="selectSubject('math')">
                    <div class="selection-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <h3 class="selection-title">Математика</h3>
                    <p class="selection-description">
                        Алгебра, геометрия, математический анализ. Подготовка к ОГЭ и ЕГЭ.
                    </p>
                </div>

                <div class="selection-card" onclick="selectSubject('physics')">
                    <div class="selection-icon">
                        <i class="fas fa-atom"></i>
                    </div>
                    <h3 class="selection-title">Физика</h3>
                    <p class="selection-description">
                        Механика, термодинамика, электромагнетизм. Решение задач и эксперименты.
                    </p>
                </div>

                <div class="selection-card" onclick="selectSubject('informatics')">
                    <div class="selection-icon">
                        <i class="fas fa-laptop-code"></i>
                    </div>
                    <h3 class="selection-title">Информатика</h3>
                    <p class="selection-description">
                        Программирование, алгоритмы, компьютерные сети. Цифровая грамотность.
                    </p>
                </div>
            </div>
        </div>

        <!-- Шаг 2: Выбор уровня -->
        <div class="section" id="step2">
            <a class="back-button" onclick="goToStep(1)">
                <i class="fas fa-arrow-left"></i>
                Назад к выбору предмета
            </a>

            <div class="selection-grid level-grid">
                <div class="selection-card" onclick="selectLevel('oge')">
                    <div class="selection-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <h3 class="selection-title">ОГЭ 2026</h3>
                    <p class="selection-description">
                        Основной государственный экзамен для 9 класса. Базовый уровень подготовки.
                    </p>
                </div>

                <div class="selection-card" onclick="selectLevel('ege')">
                    <div class="selection-icon">
                        <i class="fas fa-university"></i>
                    </div>
                    <h3 class="selection-title">ЕГЭ 2026</h3>
                    <p class="selection-description">
                        Единый государственный экзамен для 11 класса. Углубленная подготовка.
                    </p>
                </div>
            </div>
        </div>

        <!-- Шаг 3: Выбор темы -->
        <div class="section" id="step3">
            <a class="back-button" onclick="goToStep(2)">
                <i class="fas fa-arrow-left"></i>
                Назад к выбору уровня
            </a>

            <div class="selection-grid topic-grid" id="topicsGrid">
                <!-- Темы будут загружены динамически -->
            </div>
        </div>

        <!-- Шаг 4: Задание -->
        <div class="section" id="step4">
            <a class="back-button" onclick="goToStep(3)">
                <i class="fas fa-arrow-left"></i>
                Назад к выбору темы
            </a>

            <!-- Карточка задания -->
            <div class="task-card" id="taskCard">
                <!-- Задание будет загружено динамически -->
            </div>
        </div>
    </div>

    <script>
        // Текущее состояние выбора
        let currentState = {
            subject: null,
            level: null,
            topic: null
        };

        // База данных тем
        const topicsDatabase = {
            math: {
                oge: [
                    { 
                        id: 'math_oge_numbers', 
                        name: 'Числа и вычисления', 
                        description: 'Действия с числами, сравнение, оценка' 
                    }
                ],
                ege: [
                    { 
                        id: 'math_ege_numbers', 
                        name: 'Числа и вычисления', 
                        description: 'Действия с числами, логарифмы, степени' 
                    },
                    { 
                        id: 'math_ege_algebra', 
                        name: 'Алгебра', 
                        description: 'Производные, интегралы, пределы' 
                    },
                    { 
                        id: 'math_ege_geometry', 
                        name: 'Геометрия', 
                        description: 'Векторы, координаты, преобразования' 
                    }
                ]
            },
            physics: {
                oge: [
                    { 
                        id: 'physics_oge_mechanics', 
                        name: 'Механика', 
                        description: 'Кинематика, динамика, статика, колебания' 
                    },
                    { 
                        id: 'physics_oge_thermo', 
                        name: 'Термодинамика', 
                        description: 'Тепловые явления, газы, агрегатные состояния' 
                    }
                ],
                ege: [
                    { 
                        id: 'physics_ege_mechanics', 
                        name: 'Механика', 
                        description: 'Законы Ньютона, энергия, импульс, колебания' 
                    },
                    { 
                        id: 'physics_ege_electro', 
                        name: 'Электродинамика', 
                        description: 'Электричество и магнетизм, цепи, поля' 
                    }
                ]
            },
            informatics: {
                oge: [
                    { 
                        id: 'informatics_oge_basics', 
                        name: 'Основы информатики', 
                        description: 'Системы счисления, логика, информация' 
                    },
                    { 
                        id: 'informatics_oge_programming', 
                        name: 'Программирование', 
                        description: 'Алгоритмы и программы, базовые конструкции' 
                    }
                ],
                ege: [
                    { 
                        id: 'informatics_ege_networks', 
                        name: 'Цифровая грамотность', 
                        description: 'Сети, IP-адреса, протоколы, безопасность' 
                    },
                    { 
                        id: 'informatics_ege_algorithms', 
                        name: 'Алгоритмы', 
                        description: 'Поиск, сортировка, графы, динамическое программирование' 
                    }
                ]
            }
        };

        // База данных заданий (ВСЕ задания сохранены)
        const tasksDatabase = {
            'math_oge_numbers': [
                {
                    id: 'task1',
                    title: "Оценка значения дроби",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Между какими целыми числами заключено число <strong>110/13</strong>?</p>
                        <p>Выберите правильный вариант из предложенных:</p>
                    `,
                    type: 'choice',
                    options: [
                        "8 и 9",
                        "9 и 10", 
                        "10 и 11",
                        "11 и 12"
                    ],
                    correctAnswer: 0,
                    explanation: "110 ÷ 13 ≈ 8.46, значит число заключено между 8 и 9"
                },
                {
                    id: 'task2',
                    title: "Расчет стоимости колодца",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>В фирме «Родник» стоимость (в рублях) колодца из железобетонных колец рассчитывается по формуле:</p>
                        <p style="text-align: center; font-size: 1.3rem; margin: 1.5rem 0;">
                            <strong>C = 6000 + 4100n</strong>
                        </p>
                        <p>где <strong>n</strong> — число колец, установленных в колодце.</p>
                        <p>Пользуясь этой формулой, рассчитайте стоимость колодца из <strong>20 колец</strong>.</p>
                        <p>Ответ дайте в рублях.</p>
                    `,
                    type: 'input',
                    correctAnswer: '88000',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Подставляем n = 20 в формулу:</div>
                            <div class="math-step" style="text-align: center;">C = 6000 + 4100 × 20</div>
                            <div class="math-step">2. Вычисляем произведение:</div>
                            <div class="math-step" style="text-align: center;">4100 × 20 = 82000</div>
                            <div class="math-step">3. Складываем:</div>
                            <div class="math-step" style="text-align: center;">6000 + 82000 = 88000</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 88000 рублей</div>
                        </div>
                    `
                },
                {
                    id: 'task3',
                    title: "Вычисление выражения с десятичными дробями",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Найдите значение выражения:</p>
                        <p style="text-align: center; font-size: 1.5rem; margin: 1.5rem 0;">
                            <strong>1,4 × 2,4 + 0,24</strong>
                        </p>
                        <p>Введите ответ в виде десятичной дроби:</p>
                    `,
                    type: 'input',
                    correctAnswer: '3.6',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Сначала выполняем умножение:</div>
                            <div class="math-step" style="text-align: center;">1,4 × 2,4 = 3,36</div>
                            <div class="math-step">2. Затем выполняем сложение:</div>
                            <div class="math-step" style="text-align: center;">3,36 + 0,24 = 3,6</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 3,6</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Примечание: можно также заметить, что 0,24 = 1,4 × 0,1714..., но проще выполнить вычисления по порядку.
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task4',
                    title: "Вычисление выражения с дробью",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Найдите значение выражения:</p>
                        <p style="text-align: center; font-size: 1.5rem; margin: 1.5rem 0;">
                            <strong>24 ÷ (3,2 × 2)</strong>
                        </p>
                        <p>Введите ответ в виде десятичной дроби:</p>
                    `,
                    type: 'input',
                    correctAnswer: '3.75',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Сначала выполняем умножение в знаменателе:</div>
                            <div class="math-step" style="text-align: center;">3,2 × 2 = 6,4</div>
                            <div class="math-step">2. Затем выполняем деление:</div>
                            <div class="math-step" style="text-align: center;">24 ÷ 6,4 = 3,75</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 3,75</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Примечание: можно также представить как 24 ÷ 6,4 = 240 ÷ 64 = 15/4 = 3,75
                            </div>
                        </div>
                    `
                }
            ],
            'math_ege_numbers': [
                {
                    id: 'task1',
                    title: "Нахождение корня уравнения с квадратным корнем",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Найдите корень уравнения:</p>
                        <p style="text-align: center; font-size: 1.5rem; margin: 1.5rem 0;">
                            <strong>√(6x - 57) = 9</strong>
                        </p>
                        <p>Введите ответ в виде целого числа:</p>
                    `,
                    type: 'input',
                    correctAnswer: '23',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Возводим обе части уравнения в квадрат:</div>
                            <div class="math-step" style="text-align: center;">(√(6x - 57))² = 9²</div>
                            <div class="math-step" style="text-align: center;">6x - 57 = 81</div>
                            <div class="math-step">2. Переносим -57 в правую часть:</div>
                            <div class="math-step" style="text-align: center;">6x = 81 + 57</div>
                            <div class="math-step" style="text-align: center;">6x = 138</div>
                            <div class="math-step">3. Делим обе части на 6:</div>
                            <div class="math-step" style="text-align: center;">x = 138 ÷ 6</div>
                            <div class="math-step" style="text-align: center;">x = 23</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 23</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: √(6×23 - 57) = √(138 - 57) = √81 = 9 ✓
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task2',
                    title: "Нахождение корня кубического уравнения",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Найдите корень уравнения:</p>
                        <p style="text-align: center; font-size: 1.5rem; margin: 1.5rem 0;">
                            <strong>(x + 3)³ = -8</strong>
                        </p>
                        <p>Введите ответ в виде целого числа:</p>
                    `,
                    type: 'input',
                    correctAnswer: '-5',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Извлекаем кубический корень из обеих частей:</div>
                            <div class="math-step" style="text-align: center;">∛((x + 3)³) = ∛(-8)</div>
                            <div class="math-step" style="text-align: center;">x + 3 = -2</div>
                            <div class="math-step">2. Переносим 3 в правую часть:</div>
                            <div class="math-step" style="text-align: center;">x = -2 - 3</div>
                            <div class="math-step" style="text-align: center;">x = -5</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: -5</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: (-5 + 3)³ = (-2)³ = -8 ✓
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task3',
                    title: "Решение уравнения с квадратами",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Найдите корень уравнения:</p>
                        <p style="text-align: center; font-size: 1.5rem; margin: 1.5rem 0;">
                            <strong>(2x + 3)² = (2x + 9)²</strong>
                        </p>
                        <p>Введите ответ в виде целого числа:</p>
                    `,
                    type: 'input',
                    correctAnswer: '-3',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Раскрываем скобки или используем разность квадратов:</div>
                            <div class="math-step" style="text-align: center;">(2x + 3)² - (2x + 9)² = 0</div>
                            <div class="math-step">2. Применяем формулу разности квадратов:</div>
                            <div class="math-step" style="text-align: center;">[(2x + 3) - (2x + 9)] × [(2x + 3) + (2x + 9)] = 0</div>
                            <div class="math-step" style="text-align: center;">[2x + 3 - 2x - 9] × [2x + 3 + 2x + 9] = 0</div>
                            <div class="math-step" style="text-align: center;">[-6] × [4x + 12] = 0</div>
                            <div class="math-step">3. Произведение равно нулю, когда один из множителей равен нулю:</div>
                            <div class="math-step" style="text-align: center;">4x + 12 = 0</div>
                            <div class="math-step" style="text-align: center;">4x = -12</div>
                            <div class="math-step" style="text-align: center;">x = -3</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: -3</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: (2×(-3) + 3)² = (-6 + 3)² = (-3)² = 9<br>
                                (2×(-3) + 9)² = (-6 + 9)² = 3² = 9 ✓
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task4',
                    title: "Вычисление логарифмов",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Найдите значение выражения <span class="math-formula">log<sub>3</sub>162 − log<sub>3</sub>2</span>.</p>
                        <p>Выберите правильный вариант из предложенных:</p>
                    `,
                    type: 'choice',
                    options: [
                        "3,5",
                        "10", 
                        "4",
                        "3"
                    ],
                    correctAnswer: 2,
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Используем свойство логарифмов: <span class="math-formula">log<sub>a</sub>b − log<sub>a</sub>c = log<sub>a</sub>(b/c)</span></div>
                            <div class="math-step">2. Применяем к нашему выражению: <span class="math-formula">log<sub>3</sub>162 − log<sub>3</sub>2 = log<sub>3</sub>(162/2)</span></div>
                            <div class="math-step">3. Вычисляем: <span class="math-formula">162/2 = 81</span></div>
                            <div class="math-step">4. Получаем: <span class="math-formula">log<sub>3</sub>81</span></div>
                            <div class="math-step">5. Находим значение: <span class="math-formula">3<sup>4</sup> = 81</span>, значит <span class="math-formula">log<sub>3</sub>81 = 4</span></div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 4</div>
                        </div>
                    `
                }
            ],
            'math_ege_algebra': [
                {
                    id: 'task1',
                    title: "Определение объёма производства",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Некоторая компания продаёт свою продукцию по цене p = 600 руб. за единицу, переменные затраты на производство одной единицы продукции составляют υ = 300 руб., постоянные расходы предприятия f = 700 000 руб. в месяц. Месячная операционная прибыль предприятия (в рублях) вычисляется по формуле:</p>
                        <div class="formula-latex">g(q) = q(p − υ) − f</div>
                        <p>Определите месячный объём производства q (единиц продукции), при котором месячная операционная прибыль предприятия будет равна 500 000 руб.</p>
                        <p>Введите ответ в виде целого числа:</p>
                    `,
                    type: 'input',
                    correctAnswer: '4000',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Подставляем известные значения в формулу:</div>
                            <div class="math-step" style="text-align: center;">g(q) = q(600 − 300) − 700000</div>
                            <div class="math-step" style="text-align: center;">g(q) = 300q − 700000</div>
                            <div class="math-step">2. Приравниваем к заданной прибыли 500000:</div>
                            <div class="math-step" style="text-align: center;">300q − 700000 = 500000</div>
                            <div class="math-step">3. Переносим -700000 в правую часть:</div>
                            <div class="math-step" style="text-align: center;">300q = 500000 + 700000</div>
                            <div class="math-step" style="text-align: center;">300q = 1200000</div>
                            <div class="math-step">4. Делим обе части на 300:</div>
                            <div class="math-step" style="text-align: center;">q = 1200000 ÷ 300</div>
                            <div class="math-step" style="text-align: center;">q = 4000</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 4000 единиц</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: 4000 × (600 - 300) - 700000 = 4000 × 300 - 700000 = 1200000 - 700000 = 500000 ✓
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task2',
                    title: "Определение ускорения автомобиля",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Автомобиль разгоняется на прямолинейном участке шоссе с постоянным ускорением a км/ч². Скорость вычисляется по формуле:</p>
                        <div class="formula-latex">v = √(2la)</div>
                        <p>где l — пройденный автомобилем путь.</p>
                        <p>Найдите ускорение, с которым должен двигаться автомобиль, чтобы, проехав 0,8 километра, приобрести скорость 100 км/ч.</p>
                        <p>Ответ выразите в км/ч².</p>
                    `,
                    type: 'input',
                    correctAnswer: '6250',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Записываем данную формулу:</div>
                            <div class="math-step" style="text-align: center;">v = √(2la)</div>
                            <div class="math-step">2. Подставляем известные значения:</div>
                            <div class="math-step" style="text-align: center;">v = 100 км/ч, l = 0,8 км</div>
                            <div class="math-step" style="text-align: center;">100 = √(2 × 0,8 × a)</div>
                            <div class="math-step" style="text-align: center;">100 = √(1,6a)</div>
                            <div class="math-step">3. Возводим обе части в квадрат:</div>
                            <div class="math-step" style="text-align: center;">100² = 1,6a</div>
                            <div class="math-step" style="text-align: center;">10000 = 1,6a</div>
                            <div class="math-step">4. Делим обе части на 1,6:</div>
                            <div class="math-step" style="text-align: center;">a = 10000 ÷ 1,6</div>
                            <div class="math-step" style="text-align: center;">a = 6250</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 6250 км/ч²</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: √(2 × 0,8 × 6250) = √(1,6 × 6250) = √10000 = 100 ✓
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task3',
                    title: "Определение времени движения автомобиля",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Автомобиль, масса которого равна m = 1500 кг, начинает двигаться с ускорением, которое в течение t секунд остаётся неизменным, и проходит за это время путь S = 1000 метров.</p>
                        <p>Значение силы (в ньютонах), приложенной в это время к автомобилю, равно:</p>
                        <div class="formula-latex">F = (2mS) / t²</div>
                        <p>Определите наибольшее время после начала движения автомобиля, за которое он пройдёт указанный путь, если известно, что сила F, приложенная к автомобилю, не меньше 1200 Н.</p>
                        <p>Ответ выразите в секундах.</p>
                    `,
                    type: 'input',
                    correctAnswer: '50',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Записываем неравенство из условия:</div>
                            <div class="math-step" style="text-align: center;">F ≥ 1200</div>
                            <div class="math-step">2. Подставляем формулу для F:</div>
                            <div class="math-step" style="text-align: center;">(2mS) / t² ≥ 1200</div>
                            <div class="math-step">3. Подставляем числовые значения:</div>
                            <div class="math-step" style="text-align: center;">(2 × 1500 × 1000) / t² ≥ 1200</div>
                            <div class="math-step" style="text-align: center;">3000000 / t² ≥ 1200</div>
                            <div class="math-step">4. Умножаем обе части на t² (t > 0):</div>
                            <div class="math-step" style="text-align: center;">3000000 ≥ 1200t²</div>
                            <div class="math-step">5. Делим обе части на 1200:</div>
                            <div class="math-step" style="text-align: center;">2500 ≥ t²</div>
                            <div class="math-step">6. Извлекаем квадратный корень:</div>
                            <div class="math-step" style="text-align: center;">t ≤ √2500</div>
                            <div class="math-step" style="text-align: center;">t ≤ 50</div>
                            <div class="math-step">7. Наибольшее возможное время:</div>
                            <div class="math-step" style="text-align: center;">t = 50 секунд</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 50 секунд</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: F = (2 × 1500 × 1000) / 50² = 3000000 / 2500 = 1200 Н ✓
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task4',
                    title: "Сравнение капиталов компаний",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Компания «Альфа» начала инвестировать средства в перспективную отрасль в 2001 году, имея капитал в размере 3000 долларов. Каждый год, начиная с 2002 года, она получала прибыль, которая составляла 100% от капитала предыдущего года.</p>
                        <p>А компания «Бета» начала инвестировать средства в другую отрасль в 2003 году, имея капитал в размере 6000 долларов, и, начиная с 2004 года, ежегодно получала прибыль, составляющую 200% от капитала предыдущего года.</p>
                        <p>На сколько долларов капитал одной из компаний был больше капитала другой к концу 2006 года, если прибыль из оборота не изымалась?</p>
                        <p>Введите ответ в виде целого числа:</p>
                    `,
                    type: 'input',
                    correctAnswer: '66000',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Рассчитываем капитал компании «Альфа»:</div>
                            <div class="math-step" style="text-align: center;">2001 год: 3000 $</div>
                            <div class="math-step" style="text-align: center;">2002 год: 3000 × 2 = 6000 $</div>
                            <div class="math-step" style="text-align: center;">2003 год: 6000 × 2 = 12000 $</div>
                            <div class="math-step" style="text-align: center;">2004 год: 12000 × 2 = 24000 $</div>
                            <div class="math-step" style="text-align: center;">2005 год: 24000 × 2 = 48000 $</div>
                            <div class="math-step" style="text-align: center;">2006 год: 48000 × 2 = 96000 $</div>
                            
                            <div class="math-step">2. Рассчитываем капитал компании «Бета»:</div>
                            <div class="math-step" style="text-align: center;">2003 год: 6000 $</div>
                            <div class="math-step" style="text-align: center;">2004 год: 6000 × 3 = 18000 $ (200% прибыль = ×3)</div>
                            <div class="math-step" style="text-align: center;">2005 год: 18000 × 3 = 54000 $</div>
                            <div class="math-step" style="text-align: center;">2006 год: 54000 × 3 = 162000 $</div>
                            
                            <div class="math-step">3. Сравниваем капиталы к концу 2006 года:</div>
                            <div class="math-step" style="text-align: center;">«Бета» - «Альфа» = 162000 - 96000 = 66000 $</div>
                            
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 66000 долларов</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Капитал компании «Бета» больше капитала компании «Альфа» на 66000 долларов.
                            </div>
                        </div>
                    `
                }
            ],
            'math_ege_geometry': [
                {
                    id: 'task1',
                    title: "Высота треугольника",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>У треугольника со сторонами 9 и 6 проведены высоты к этим сторонам. Высота, проведенная к первой стороне, равна 4. Чему равна высота, проведенная ко второй стороне?</p>
                        
                        <div class="geometry-image">
                            <img src="https://math-ege.sdamgia.ru/get_file?id=144288" alt="Треугольник с высотами">
                        </div>
                        
                        <p>Введите ответ в виде десятичной дроби или целого числа:</p>
                    `,
                    type: 'input',
                    correctAnswer: '6',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Площадь треугольника можно найти двумя способами:</div>
                            <div class="math-step" style="text-align: center;">S = (1/2) × a × h₁ = (1/2) × b × h₂</div>
                            <div class="math-step">2. Подставляем известные значения:</div>
                            <div class="math-step" style="text-align: center;">(1/2) × 9 × 4 = (1/2) × 6 × h₂</div>
                            <div class="math-step">3. Упрощаем уравнение:</div>
                            <div class="math-step" style="text-align: center;">36 = 6 × h₂</div>
                            <div class="math-step">4. Решаем уравнение:</div>
                            <div class="math-step" style="text-align: center;">h₂ = 36 ÷ 6 = 6</div>
                            
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 6</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: Площадь через первую высоту: (1/2)×9×4 = 18<br>
                                Площадь через вторую высоту: (1/2)×6×6 = 18 ✓
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task2',
                    title: "Углы параллелограмма",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Сумма двух углов параллелограмма равна 100°. Найдите один из оставшихся углов. Ответ дайте в градусах.</p>
                        
                        <div class="geometry-image">
                            <img src="https://math-ege.sdamgia.ru/get_file?id=29623" alt="Параллелограмм">
                        </div>
                        
                        <p>Введите ответ в виде целого числа:</p>
                    `,
                    type: 'input',
                    correctAnswer: '130',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Свойства параллелограмма:</div>
                            <div class="math-step" style="text-align: center;">Сумма углов, прилежащих к одной стороне = 180°</div>
                            <div class="math-step" style="text-align: center;">Противоположные углы равны</div>
                            
                            <div class="math-step">2. Если сумма двух углов = 100°, то это могут быть:</div>
                            <div class="math-step" style="text-align: center;">а) Противоположные углы (тогда каждый = 50°)</div>
                            <div class="math-step" style="text-align: center;">б) Соседние углы (тогда один = x, другой = 100° - x)</div>
                            
                            <div class="math-step">3. Проверим вариант а):</div>
                            <div class="math-step" style="text-align: center;">Если противоположные углы по 50°, то соседние = 180° - 50° = 130°</div>
                            
                            <div class="math-step">4. Проверим вариант б):</div>
                            <div class="math-step" style="text-align: center;">Если соседние углы = x и 100° - x, то их сумма должна быть 180°</div>
                            <div class="math-step" style="text-align: center;">x + (100° - x) = 100° ≠ 180° → это невозможно</div>
                            
                            <div class="math-step">5. Значит, это противоположные углы:</div>
                            <div class="math-step" style="text-align: center;">Каждый противоположный угол = 100° ÷ 2 = 50°</div>
                            <div class="math-step" style="text-align: center;">Соседний угол = 180° - 50° = 130°</div>
                            
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 130°</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: 50° + 50° = 100° (данная сумма)<br>
                                50° + 130° = 180° (соседние углы) ✓
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task3',
                    title: "Диагональ прямоугольника",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Периметр прямоугольника равен 10, а площадь равна 4,5. Найдите диагональ этого прямоугольника.</p>
                        
                        <div class="geometry-image">
                            <img src="https://math-ege.sdamgia.ru/get_file?id=113307" alt="Прямоугольник">
                        </div>
                        
                        <p>Введите ответ в виде десятичной дроби:</p>
                    `,
                    type: 'input',
                    correctAnswer: '4',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Записываем данные:</div>
                            <div class="math-step" style="text-align: center;">2(a + b) = 10 → a + b = 5</div>
                            <div class="math-step" style="text-align: center;">a × b = 4,5</div>
                            
                            <div class="math-step">2. Найдем a² + b²:</div>
                            <div class="math-step" style="text-align: center;">(a + b)² = a² + 2ab + b²</div>
                            <div class="math-step" style="text-align: center;">5² = a² + b² + 2 × 4,5</div>
                            <div class="math-step" style="text-align: center;">25 = a² + b² + 9</div>
                            <div class="math-step" style="text-align: center;">a² + b² = 25 - 9 = 16</div>
                            
                            <div class="math-step">3. Диагональ прямоугольника:</div>
                            <div class="math-step" style="text-align: center;">d = √(a² + b²) = √16 = 4</div>
                            
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 4</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: Пусть a = 4,5, b = 0,5 → 2(4,5+0,5)=10 ✓<br>
                                Площадь: 4,5×0,5=2,25 ≠4,5<br>
                                Правильное решение: a=3, b=1,5 → 2(3+1,5)=9 ≠10<br>
                                Решаем систему: a+b=5, ab=4,5<br>
                                Квадратное уравнение: x²-5x+4,5=0<br>
                                D=25-18=7, x=(5±√7)/2<br>
                                Тогда a²+b²=(a+b)²-2ab=25-9=16<br>
                                d=√16=4 ✓
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task4',
                    title: "Сторона правильного треугольника",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Радиус окружности, описанной около правильного треугольника, равен √3. Найдите сторону этого треугольника.</p>
                        
                        <div class="geometry-image">
                            <img src="https://math-ege.sdamgia.ru/get_file?id=138540" alt="Правильный треугольник с описанной окружностью">
                        </div>
                        
                        <p>Введите ответ в виде числа:</p>
                    `,
                    type: 'input',
                    correctAnswer: '3',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Формула связи стороны правильного треугольника и радиуса описанной окружности:</div>
                            <div class="math-step" style="text-align: center;">R = a√3 / 3</div>
                            <div class="math-step">где a — сторона треугольника, R — радиус описанной окружности.</div>
                            
                            <div class="math-step">2. Подставляем данное значение R:</div>
                            <div class="math-step" style="text-align: center;">√3 = a√3 / 3</div>
                            
                            <div class="math-step">3. Умножаем обе части на 3:</div>
                            <div class="math-step" style="text-align: center;">3√3 = a√3</div>
                            
                            <div class="math-step">4. Делим обе части на √3:</div>
                            <div class="math-step" style="text-align: center;">a = 3</div>
                            
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 3</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: Для правильного треугольника со стороной 3:<br>
                                R = 3√3 / 3 = √3 ✓
                            </div>
                        </div>
                    `
                }
            ],
            'informatics_ege_networks': {
                title: "Определение IP-адресов в компьютерных сетях",
                description: `
                    <p><strong>Условие задачи:</strong></p>
                    <p>В терминологии сетей TCP/IP маской сети называют двоичное число, которое показывает, какая часть IP-адреса узла сети относится к адресу сети, а какая – к адресу узла в этой сети. Адрес сети получается в результате применения поразрядной конъюнкции к заданному адресу узла и его маске.</p>
                    
                    <p>Широковещательным адресом называется специализированный адрес, в котором на месте нулей в маске стоят единицы. Адрес сети и широковещательный адрес не могут быть использованы для адресации сетевых устройств.</p>
                    
                    <p><strong>Сеть задана IP-адресом одного из входящих в неё узлов 98.81.154.195 и сетевой маской 255.252.0.0.</strong></p>
                    
                    <p>Найдите наибольший в данной сети IP-адрес, который может быть назначен компьютеру. В ответе укажите найденный IP-адрес без разделителей.</p>
                    
                    <div class="task-example">
                        <strong>Пример:</strong> Если бы найденный адрес был равен 111.22.3.44, то в ответе следовало бы записать 11122344.
                    </div>
                `,
                type: 'choice',
                options: [
                    "9883255254",
                    "4582032013",
                    "392033493", 
                    "3321234918"
                ],
                correctAnswer: 0,
                explanation: "Правильный ответ: 9883255254"
            },
            // ЗАДАНИЯ ПО ФИЗИКЕ (Механика, ОГЭ 2026)
            'physics_oge_mechanics': [
                {
                    id: 'task1',
                    title: "Ускорение тела под действием силы",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Одна и та же горизонтальная сила F действует вначале на тело 1 массой 0,5 кг, а затем на тело 2 массой 3 кг. Оба тела до начала действия силы покоились на гладком горизонтальном столе.</p>
                        <p>С каким по модулю ускорением будет двигаться тело 2 под действием силы F, если тело 1 движется с ускорением, модуль которого равен 1,8 м/с²?</p>
                        <div class="task-example">
                            <strong>Формула:</strong> По второму закону Ньютона F = m × a
                        </div>
                    `,
                    type: 'input',
                    correctAnswer: '0.3',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Найдём силу F из движения первого тела:</div>
                            <div class="math-step" style="text-align: center;">F = m₁ × a₁ = 0,5 кг × 1,8 м/с² = 0,9 Н</div>
                            <div class="math-step">2. Теперь найдём ускорение второго тела:</div>
                            <div class="math-step" style="text-align: center;">a₂ = F / m₂ = 0,9 Н / 3 кг = 0,3 м/с²</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 0,3 м/с²</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: Сила одинаковая, значит ускорение обратно пропорционально массе.
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task2',
                    title: "Отношение потенциальных энергий",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Два тела находятся на одной и той же высоте над поверхностью земли. Масса первого тела m₁ в пять раз больше массы второго тела m₂.</p>
                        <p>Запишите, чему равно отношение потенциальной энергии первого тела E<sub>п1</sub> к потенциальной энергии второго тела E<sub>п2</sub>.</p>
                        <div class="task-example">
                            <strong>Формула:</strong> Потенциальная энергия E<sub>п</sub> = mgh
                        </div>
                    `,
                    type: 'input',
                    correctAnswer: '5',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Запишем формулы потенциальной энергии:</div>
                            <div class="math-step" style="text-align: center;">E<sub>п1</sub> = m₁gh</div>
                            <div class="math-step" style="text-align: center;">E<sub>п2</sub> = m₂gh</div>
                            <div class="math-step">2. Найдём отношение:</div>
                            <div class="math-step" style="text-align: center;">E<sub>п1</sub>/E<sub>п2</sub> = (m₁gh) / (m₂gh) = m₁/m₂</div>
                            <div class="math-step">3. По условию m₁/m₂ = 5</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 5</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Так как высота h и ускорение свободного падения g одинаковы, отношение энергий равно отношению масс.
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task3',
                    title: "Частота колебаний по графику",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>На рисунке представлен график зависимости координаты тела от времени. Какова частота колебаний? Ответ запишите в герцах.</p>
                        
                        <div class="physics-image">
                            <img src="https://phys-oge.sdamgia.ru/get_file?id=46825" 
                                 alt="График колебаний" 
                                 style="filter: invert(1) brightness(2) contrast(1.2); background: transparent;">
                        </div>
                        
                        <div class="task-example">
                            <strong>Подсказка:</strong> Частота ν = 1/T, где T — период колебаний
                        </div>
                    `,
                    type: 'input',
                    correctAnswer: '0.25',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Из графика определяем период колебаний:</div>
                            <div class="math-step" style="text-align: center;">Тело возвращается в исходное положение через 4 секунды</div>
                            <div class="math-step" style="text-align: center;">Значит, период T = 4 с</div>
                            <div class="math-step">2. Частота связана с периодом формулой:</div>
                            <div class="math-step" style="text-align: center;">ν = 1/T</div>
                            <div class="math-step">3. Подставляем значение периода:</div>
                            <div class="math-step" style="text-align: center;">ν = 1 / 4 с = 0,25 Гц</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 0,25 Гц</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Частота показывает, сколько полных колебаний совершает тело за 1 секунду.
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task4',
                    title: "Уравновешивание системы блоков",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>На рисунке представлена система идеальных блоков. Какой силой, приложенной к правому концу веревки, можно уравновесить данную систему? Ответ запишите в ньютонах.</p>
                        
                        <div class="physics-image">
                            <img src="https://phys-oge.sdamgia.ru/get_file?id=62845" 
                                 alt="Система блоков" 
                                 style="filter: invert(1) brightness(2) contrast(1.2); background: transparent;">
                        </div>
                        
                        <div class="task-example">
                            <strong>Данные:</strong> Масса груза 6 кг, g = 10 м/с². Блоки считайте идеальными (невесомыми и без трения).
                        </div>
                    `,
                    type: 'input',
                    correctAnswer: '30',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Найдём вес груза:</div>
                            <div class="math-step" style="text-align: center;">P = mg = 6 кг × 10 м/с² = 60 Н</div>
                            <div class="math-step">2. Проанализируем систему блоков:</div>
                            <div class="math-step" style="text-align: center;">В системе два подвижных блока, дающих выигрыш в силе в 2 раза</div>
                            <div class="math-step">3. Сила для уравновешивания:</div>
                            <div class="math-step" style="text-align: center;">F = P / 2 = 60 Н / 2 = 30 Н</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 30 Н</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Подвижный блок даёт выигрыш в силе в 2 раза, но проигрыш в расстоянии.
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task5',
                    title: "Скорость при равноускоренном движении",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Автомобиль трогается с места и движется с постоянным ускорением 2 м/с². Какую скорость он приобретет за 5 секунд?</p>
                        <div class="task-example">
                            <strong>Формула:</strong> При равноускоренном движении из состояния покоя v = at
                        </div>
                    `,
                    type: 'input',
                    correctAnswer: '10',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Используем формулу скорости при равноускоренном движении из состояния покоя:</div>
                            <div class="math-step" style="text-align: center;">v = at</div>
                            <div class="math-step">2. Подставляем значения:</div>
                            <div class="math-step" style="text-align: center;">v = 2 м/с² × 5 с = 10 м/с</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 10 м/с</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Ускорение 2 м/с² означает, что каждую секунду скорость увеличивается на 2 м/с.
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task6',
                    title: "Кинетическая энергия тела",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Тело массой 4 кг движется со скоростью 3 м/с. Чему равна его кинетическая энергия?</p>
                        <div class="task-example">
                            <strong>Формула:</strong> Кинетическая энергия E<sub>к</sub> = (m × v²) / 2
                        </div>
                    `,
                    type: 'input',
                    correctAnswer: '18',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Запишем формулу кинетической энергии:</div>
                            <div class="math-step" style="text-align: center;">E<sub>к</sub> = (m × v²) / 2</div>
                            <div class="math-step">2. Подставляем значения:</div>
                            <div class="math-step" style="text-align: center;">E<sub>к</sub> = (4 кг × (3 м/с)²) / 2</div>
                            <div class="math-step">3. Вычисляем:</div>
                            <div class="math-step" style="text-align: center;">E<sub>к</sub> = (4 × 9) / 2 = 36 / 2 = 18 Дж</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 18 Дж</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Кинетическая энергия зависит от квадрата скорости, поэтому при увеличении скорости в 2 раза энергия увеличивается в 4 раза.
                            </div>
                        </div>
                    `
                }
            ],
            // НОВЫЕ ЗАДАНИЯ ПО ФИЗИКЕ (Термодинамика, ОГЭ 2026)
            'physics_oge_thermo': [
                {
                    id: 'task1',
                    title: "Нагрев и замерзание воды",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Имеются две порции воды одинаковой массы, находящиеся при температуре 0 °C. Первую порцию нагревают, затрачивая при этом количество теплоты Q₁. Если заморозить вторую порцию, чтобы она полностью превратилась в лед, то она выделит в 2,7 раза большее количество теплоты.</p>
                        <p>Определите, на сколько градусов Δt нагревается первая порция воды при сообщении ей количества теплоты Q₁.</p>
                        <div class="task-example">
                            <strong>Данные:</strong> Удельная теплоемкость воды c = 4200 Дж/(кг·°C), удельная теплота плавления льда λ = 3,3×10⁵ Дж/кг
                        </div>
                    `,
                    type: 'input',
                    correctAnswer: '70',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Количество теплоты на нагревание первой порции:</div>
                            <div class="math-step" style="text-align: center;">Q₁ = cmΔt</div>
                            <div class="math-step">2. Количество теплоты при замерзании второй порции:</div>
                            <div class="math-step" style="text-align: center;">Q₂ = λm</div>
                            <div class="math-step">3. По условию Q₂ = 2,7Q₁:</div>
                            <div class="math-step" style="text-align: center;">λm = 2,7 × cmΔt</div>
                            <div class="math-step">4. Сокращаем массу m:</div>
                            <div class="math-step" style="text-align: center;">λ = 2,7cΔt</div>
                            <div class="math-step">5. Выражаем Δt:</div>
                            <div class="math-step" style="text-align: center;">Δt = λ / (2,7c)</div>
                            <div class="math-step">6. Подставляем значения:</div>
                            <div class="math-step" style="text-align: center;">Δt = (3,3×10⁵) / (2,7 × 4200)</div>
                            <div class="math-step" style="text-align: center;">Δt = 330000 / 11340 ≈ 29,1 °C</div>
                            <div class="math-step">7. Уточняем расчет с более точными значениями:</div>
                            <div class="math-step" style="text-align: center;">λ = 330000 Дж/кг, c = 4200 Дж/(кг·°C)</div>
                            <div class="math-step" style="text-align: center;">Δt = 330000 / (2,7 × 4200) = 330000 / 11340 ≈ 29,1 °C</div>
                            <div class="math-step" style="text-align: center;">Проверим с λ = 334000 Дж/кг:</div>
                            <div class="math-step" style="text-align: center;">Δt = 334000 / (2,7 × 4200) = 334000 / 11340 ≈ 29,5 °C</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: ≈ 29 °C</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Точное значение зависит от принятых значений λ и c.
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task2',
                    title: "Смешивание жидкостей",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>В калориметре смешивают две жидкости. Объем второй жидкости в 1,2 раза больше объема первой; плотность первой жидкости в 1,6 раза больше плотности второй; удельная теплоемкость первой жидкости в 2 раза меньше, чем удельная теплоемкость второй, а температура первой жидкости, равная 20 °C, в 2 раза больше, чем температура второй.</p>
                        <p>Определите установившуюся температуру смеси. Потерями теплоты можно пренебречь.</p>
                    `,
                    type: 'input',
                    correctAnswer: '14',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Введем обозначения:</div>
                            <div class="math-step" style="text-align: center;">V₁ = V, V₂ = 1,2V</div>
                            <div class="math-step" style="text-align: center;">ρ₁ = 1,6ρ, ρ₂ = ρ</div>
                            <div class="math-step" style="text-align: center;">c₁ = c/2, c₂ = c</div>
                            <div class="math-step" style="text-align: center;">t₁ = 20°C, t₂ = 10°C</div>
                            <div class="math-step">2. Найдем массы жидкостей:</div>
                            <div class="math-step" style="text-align: center;">m₁ = ρ₁V₁ = 1,6ρ × V</div>
                            <div class="math-step" style="text-align: center;">m₂ = ρ₂V₂ = ρ × 1,2V = 1,2ρV</div>
                            <div class="math-step">3. Уравнение теплового баланса:</div>
                            <div class="math-step" style="text-align: center;">m₁c₁(t₁ - t) = m₂c₂(t - t₂)</div>
                            <div class="math-step">4. Подставляем выражения:</div>
                            <div class="math-step" style="text-align: center;">(1,6ρV) × (c/2) × (20 - t) = (1,2ρV) × c × (t - 10)</div>
                            <div class="math-step">5. Сокращаем ρVc:</div>
                            <div class="math-step" style="text-align: center;">0,8 × (20 - t) = 1,2 × (t - 10)</div>
                            <div class="math-step">6. Раскрываем скобки:</div>
                            <div class="math-step" style="text-align: center;">16 - 0,8t = 1,2t - 12</div>
                            <div class="math-step">7. Переносим слагаемые:</div>
                            <div class="math-step" style="text-align: center;">16 + 12 = 1,2t + 0,8t</div>
                            <div class="math-step" style="text-align: center;">28 = 2t</div>
                            <div class="math-step" style="text-align: center;">t = 14 °C</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 14 °C</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: m₁c₁Δt₁ = (1,6Vρ)(c/2)(20-14) = 0,8Vρc×6 = 4,8Vρc<br>
                                m₂c₂Δt₂ = (1,2Vρ)c(14-10) = 1,2Vρc×4 = 4,8Vρc ✓
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task3',
                    title: "Нагревание и плавление свинца",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Кусок свинца, имеющего температуру 27 °C, начинают нагревать на плитке постоянной мощности. Через 10 минут от начала нагревания свинец нагрелся до температуры плавления.</p>
                        <p>Сколько еще времени потребуется для плавления свинца?</p>
                        <div class="task-example">
                            <strong>Данные:</strong> Удельная теплоемкость свинца c = 130 Дж/(кг·°C), температура плавления tпл = 327°C, удельная теплота плавления λ = 2,5×10⁴ Дж/кг
                        </div>
                    `,
                    type: 'input',
                    correctAnswer: '4',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Найдем количество теплоты на нагревание:</div>
                            <div class="math-step" style="text-align: center;">Q₁ = cm(tпл - tнач) = cm(327 - 27) = 300cm</div>
                            <div class="math-step">2. На нагрев затрачено 10 минут при мощности P:</div>
                            <div class="math-step" style="text-align: center;">Q₁ = P × τ₁ = P × 10 мин</div>
                            <div class="math-step">3. Количество теплоты на плавление:</div>
                            <div class="math-step" style="text-align: center;">Q₂ = λm</div>
                            <div class="math-step">4. Найдем отношение Q₂/Q₁:</div>
                            <div class="math-step" style="text-align: center;">Q₂/Q₁ = λm / (300cm) = λ / (300c)</div>
                            <div class="math-step">5. Подставляем значения:</div>
                            <div class="math-step" style="text-align: center;">Q₂/Q₁ = (2,5×10⁴) / (300 × 130) = 25000 / 39000 = 25/39 ≈ 0,641</div>
                            <div class="math-step">6. Время на плавление:</div>
                            <div class="math-step" style="text-align: center;">τ₂ = τ₁ × (Q₂/Q₁) = 10 × (25/39) ≈ 6,41 минуты</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: ≈ 6,4 минуты</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Более точные значения: λ = 25000 Дж/кг, c = 130 Дж/(кг·°C)<br>
                                Δt = 300°C, Q₁/Q₂ = (300×130)/25000 = 39000/25000 = 1,56<br>
                                τ₂ = 10/1,56 ≈ 6,41 мин
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task4',
                    title: "Плавление снега стальным шаром",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>В снежный сугроб, имеющий температуру 0 °C, бросили раскаленный до температуры 600 °C стальной шар массой 2,2 кг. Какова масса расплавленного снега? Потерями энергии в окружающую среду и испарением воды пренебречь.</p>
                        <div class="task-example">
                            <strong>Данные:</strong> Удельная теплоемкость стали cст = 460 Дж/(кг·°C), удельная теплота плавления льда λ = 3,3×10⁵ Дж/кг, температура плавления льда 0°C
                        </div>
                    `,
                    type: 'input',
                    correctAnswer: '1.84',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Количество теплоты, отданное стальным шаром:</div>
                            <div class="math-step" style="text-align: center;">Qотд = cстmстΔt = 460 × 2,2 × (600 - 0) = 460 × 2,2 × 600</div>
                            <div class="math-step">2. Вычисляем:</div>
                            <div class="math-step" style="text-align: center;">Qотд = 460 × 1320 = 607200 Дж</div>
                            <div class="math-step">3. Эта теплота идет на плавление снега:</div>
                            <div class="math-step" style="text-align: center;">Qпол = λmсн</div>
                            <div class="math-step">4. Из равенства Qотд = Qпол:</div>
                            <div class="math-step" style="text-align: center;">λmсн = 607200</div>
                            <div class="math-step">5. Выражаем массу снега:</div>
                            <div class="math-step" style="text-align: center;">mсн = 607200 / λ = 607200 / 330000</div>
                            <div class="math-step">6. Вычисляем:</div>
                            <div class="math-step" style="text-align: center;">mсн = 1,84 кг</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 1,84 кг</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: Qотд = 460×2,2×600 = 607200 Дж<br>
                                Qпол = 330000×1,84 = 607200 Дж ✓
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task5',
                    title: "Выкипание воды электрокипятильником",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Электрокипятильник поместили в сосуд, содержащий 400 г воды при температуре 20°C и включили в сеть напряжением 220 В. Через 20 мин спираль выключили. Сколько воды выкипело? Сопротивление электрокипятильника равно 160 Ом, а КПД  — 75%.</p>
                        <div class="task-example">
                            <strong>Данные:</strong> Удельная теплоемкость воды c = 4200 Дж/(кг·°C), удельная теплота парообразования L = 2,3×10⁶ Дж/кг
                        </div>
                    `,
                    type: 'input',
                    correctAnswer: '0.055',
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Найдем мощность кипятильника:</div>
                            <div class="math-step" style="text-align: center;">P = U²/R = 220²/160 = 48400/160 = 302,5 Вт</div>
                            <div class="math-step">2. Полезная мощность с учетом КПД:</div>
                            <div class="math-step" style="text-align: center;">Pполез = P × η = 302,5 × 0,75 = 226,875 Вт</div>
                            <div class="math-step">3. Общее время работы:</div>
                            <div class="math-step" style="text-align: center;">τ = 20 мин = 1200 с</div>
                            <div class="math-step">4. Полезная теплота:</div>
                            <div class="math-step" style="text-align: center;">Qполез = Pполез × τ = 226,875 × 1200 = 272250 Дж</div>
                            <div class="math-step">5. Теплота на нагревание воды до кипения:</div>
                            <div class="math-step" style="text-align: center;">Q₁ = cmΔt = 4200 × 0,4 × (100 - 20) = 4200 × 0,4 × 80 = 134400 Дж</div>
                            <div class="math-step">6. Оставшаяся теплота на парообразование:</div>
                            <div class="math-step" style="text-align: center;">Q₂ = Qполез - Q₁ = 272250 - 134400 = 137850 Дж</div>
                            <div class="math-step">7. Масса выкипевшей воды:</div>
                            <div class="math-step" style="text-align: center;">mвык = Q₂/L = 137850 / 2300000 = 0,06 кг</div>
                            <div class="math-step">8. Уточняем расчет:</div>
                            <div class="math-step" style="text-align: center;">mвык = 137850 / 2300000 = 0,0599 кг ≈ 0,06 кг</div>
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Ответ: 0,06 кг (60 г)</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Проверка: Q₁ = 134400 Дж (на нагрев)<br>
                                Q₂ = 0,06×2300000 = 138000 Дж (на парообразование)<br>
                                Qобщ = 134400 + 138000 = 272400 Дж ≈ 272250 Дж ✓
                            </div>
                        </div>
                    `
                }
            ],
            // НОВЫЕ ЗАДАНИЯ ПО ФИЗИКЕ (Механика, ЕГЭ 2026)
            'physics_ege_mechanics': [
                {
                    id: 'task1',
                    title: "Плавающее тело с шариком",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>К телу, имеющему внутреннюю герметичную полость, на невесомой нерастяжимой нити привязан сплошной шарик. Система «тело + шарик» плавает в сосуде с жидкостью, не касаясь стенок и дна сосуда. Плотность материала тела и шарика 1,6 г/см³, плотность жидкости 800 кг/м³, объем полости составляет 3/4 объема тела, объем шарика равен 1/4 объема тела. Исходя из условия задачи, выберите два верных утверждения.</p>
                        
                        <p>1.  Модуль силы Архимеда, действующей на тело, меньше модуля силы Архимеда, действующей на шарик.</p>
                        <p>2.  Модуль силы натяжения нити равен модулю силы тяжести, действующей на шарик.</p>
                        <p>3.  Модуль силы натяжения нити меньше модуля силы Архимеда, действующей на тело.</p>
                        <p>4.  Модуль силы тяжести, действующей на шарик, равен модулю силы тяжести, действующей на тело.</p>
                        <p>5.  Объем погруженной части тела равен четверти объема этого тела.</p>
                        
                        <div class="task-example">
                            <strong>Подсказка:</strong> Используйте условие плавания системы и закон Архимеда.
                        </div>
                    `,
                    type: 'choice-multiple',
                    options: [
                        "1. Модуль силы Архимеда, действующей на тело, меньше модуля силы Архимеда, действующей на шарик.",
                        "2. Модуль силы натяжения нити равен модулю силы тяжести, действующей на шарик.",
                        "3. Модуль силы натяжения нити меньше модуля силы Архимеда, действующей на тело.",
                        "4. Модуль силы тяжести, действующей на шарик, равен модулю силы тяжести, действующей на тело.",
                        "5. Объем погруженной части тела равен четверти объема этого тела."
                    ],
                    correctAnswers: [2, 4],
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Проверим утверждение 1:</div>
                            <div class="math-step" style="text-align: center;">Пусть V — объем тела. Тогда V<sub>шарика</sub> = V/4</div>
                            <div class="math-step" style="text-align: center;">Объем полости = 3V/4, значит объем материала тела = V - 3V/4 = V/4</div>
                            <div class="math-step" style="text-align: center;">F<sub>Aшарика</sub> = ρ<sub>ж</sub>gV<sub>шарика</sub> = 800g(V/4) = 200gV</div>
                            <div class="math-step" style="text-align: center;">Объем погруженной части тела найдем из условия плавания</div>
                            <div class="math-step" style="text-align: center;">F<sub>Aтела</sub> будет меньше F<sub>Aшарика</sub> — утверждение 1 верно</div>
                            
                            <div class="math-step">2. Проверим утверждение 2:</div>
                            <div class="math-step" style="text-align: center;">Для шарика: T + F<sub>Aшарика</sub> = mg</div>
                            <div class="math-step" style="text-align: center;">T = mg - F<sub>Aшарика</sub> ≠ mg — утверждение 2 неверно</div>
                            
                            <div class="math-step">3. Проверим утверждение 3:</div>
                            <div class="math-step" style="text-align: center;">Из решения видно, что T < F<sub>Aтела</sub> — утверждение 3 верно</div>
                            
                            <div class="math-step">4. Проверим утверждение 4:</div>
                            <div class="math-step" style="text-align: center;">m<sub>шарика</sub> = ρ<sub>материала</sub>V<sub>шарика</sub> = 1,6×(V/4) = 0,4V</div>
                            <div class="math-step" style="text-align: center;">m<sub>тела</sub> = ρ<sub>материала</sub>V<sub>материала</sub> = 1,6×(V/4) = 0,4V</div>
                            <div class="math-step" style="text-align: center;">m<sub>шарика</sub> = m<sub>тела</sub> — утверждение 4 верно</div>
                            
                            <div class="math-step">5. Проверим утверждение 5:</div>
                            <div class="math-step" style="text-align: center;">V<sub>погр.тела</sub> найдем из условия плавания тела:</div>
                            <div class="math-step" style="text-align: center;">F<sub>Aтела</sub> = m<sub>тела</sub>g - T</div>
                            <div class="math-step" style="text-align: center;">ρ<sub>ж</sub>gV<sub>погр.тела</sub> = ρ<sub>материала</sub>gV<sub>материала</sub> - T</div>
                            <div class="math-step" style="text-align: center;">Подставляя значения, получим V<sub>погр.тела</sub> ≠ V/4 — утверждение 5 неверно</div>
                            
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Правильные ответы: 3 и 4</div>
                        </div>
                    `
                },
                {
                    id: 'task2',
                    title: "Анализ графика скорости",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Анализируя график зависимости модуля скорости тела от времени, выберите из приведенных ниже утверждений три правильных и укажите их номера.</p>
                        
                        <div class="physics-image">
                            <img src="https://phys-ege.sdamgia.ru/get_file?id=129245" 
                                 alt="График зависимости скорости от времени" 
                                 style="filter: invert(1) brightness(2) contrast(1.2); background: transparent;">
                        </div>
                        
                        <p>1.  Скорость тела за шесть секунд изменилась от 0 м/с до 6 м/с.</p>
                        <p>2.  Тело двигалось равноускоренно в интервале от 0 до 1 с и в интервале от 2 до 4 с, и равномерно в интервалах 1–2 и 4–6 с.</p>
                        <p>3.  Тело двигалось равноускоренно в интервале от 0 до 1 с и в интервале от 2 до 4 с, и не двигалось в интервалах 1–2 и 4–6 с.</p>
                        <p>4.  За 6 с тело прошло путь 23 м.</p>
                        <p>5.  За 6 с тело прошло путь 36 м.</p>
                        
                        <div class="task-example">
                            <strong>Подсказка:</strong> Проанализируйте характер движения на разных участках графика и вычислите пройденный путь.
                        </div>
                    `,
                    type: 'choice-multiple',
                    options: [
                        "1. Скорость тела за шесть секунд изменилась от 0 м/с до 6 м/с.",
                        "2. Тело двигалось равноускоренно в интервале от 0 до 1 с и в интервале от 2 до 4 с, и равномерно в интервалах 1–2 и 4–6 с.",
                        "3. Тело двигалось равноускоренно в интервале от 0 до 1 с и в интервале от 2 до 4 с, и не двигалось в интервалах 1–2 и 4–6 с.",
                        "4. За 6 с тело прошло путь 23 м.",
                        "5. За 6 с тело прошло путь 36 м."
                    ],
                    correctAnswers: [1, 2, 4],
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Проверим утверждение 1:</div>
                            <div class="math-step" style="text-align: center;">На графике: при t=0: v=0 м/с, при t=6 с: v=6 м/с</div>
                            <div class="math-step" style="text-align: center;">Утверждение 1 верно</div>
                            
                            <div class="math-step">2. Проверим утверждение 2:</div>
                            <div class="math-step" style="text-align: center;">0-1 с: v равномерно растет от 0 до 2 м/с — равноускоренное</div>
                            <div class="math-step" style="text-align: center;">1-2 с: v=const=2 м/с — равномерное</div>
                            <div class="math-step" style="text-align: center;">2-4 с: v равномерно растет от 2 до 5 м/с — равноускоренное</div>
                            <div class="math-step" style="text-align: center;">4-6 с: v=const=6 м/с — равномерное</div>
                            <div class="math-step" style="text-align: center;">Утверждение 2 верно</div>
                            
                            <div class="math-step">3. Проверим утверждение 3:</div>
                            <div class="math-step" style="text-align: center;">На участках 1-2 и 4-6 тело движется, а не стоит</div>
                            <div class="math-step" style="text-align: center;">Утверждение 3 неверно</div>
                            
                            <div class="math-step">4. Проверим утверждение 4:</div>
                            <div class="math-step" style="text-align: center;">Пройденный путь = площадь под графиком v(t):</div>
                            <div class="math-step" style="text-align: center;">S = S₁(0-1) + S₂(1-2) + S₃(2-4) + S₄(4-6)</div>
                            <div class="math-step" style="text-align: center;">S₁ = (0+2)/2 × 1 = 1 м</div>
                            <div class="math-step" style="text-align: center;">S₂ = 2 × 1 = 2 м</div>
                            <div class="math-step" style="text-align: center;">S₃ = (2+5)/2 × 2 = 7 м</div>
                            <div class="math-step" style="text-align: center;">S₄ = 6 × 2 = 12 м</div>
                            <div class="math-step" style="text-align: center;">S = 1 + 2 + 7 + 12 = 22 м</div>
                            <div class="math-step" style="text-align: center;">Утверждение 4 неверно</div>
                            
                            <div class="math-step">5. Проверим утверждение 5:</div>
                            <div class="math-step" style="text-align: center;">S = 22 м ≠ 36 м — утверждение 5 неверно</div>
                            
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Правильные ответы: 1, 2</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Из вычислений: путь = 22 м, значит утверждение 4 неверно, правильные ответы: 1, 2.
                            </div>
                        </div>
                    `
                },
                {
                    id: 'task3',
                    title: "Математический маятник",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Математический маятник, совершающий колебания с частотой 2 Гц, отклонили на небольшой угол от положения равновесия в положение 1 и отпустили из состояния покоя. Из приведённого ниже списка выберите все верные утверждения о колебаниях маятника. Сопротивлением воздуха пренебречь.</p>
                        
                        <div class="physics-image">
                            <img src="https://phys-ege.sdamgia.ru/get_file?id=171769" 
                                 alt="Математический маятник" 
                                 style="filter: invert(1) brightness(2) contrast(1.2); background: transparent;">
                        </div>
                        
                        <p>1. При движении из положения 1 в положение 3 полная механическая энергия груза маятника остаётся неизменной.</p>
                        <p>2. Период колебаний маятника равен 1 с.</p>
                        <p>3. Через 0,5 с груз маятника в первый раз вернётся в положение 1.</p>
                        <p>4. Кинетическая энергия груза маятника в первый раз достигнет своего минимума через 0,5 с после начала движения.</p>
                        <p>5. При движении из положения 1 в положение 2 модуль центростремительного ускорения груза маятника уменьшается.</p>
                        
                        <div class="task-example">
                            <strong>Подсказка:</strong> Используйте свойства гармонических колебаний и закон сохранения энергии.
                        </div>
                    `,
                    type: 'choice-multiple',
                    options: [
                        "1. При движении из положения 1 в положение 3 полная механическая энергия груза маятника остаётся неизменной.",
                        "2. Период колебаний маятника равен 1 с.",
                        "3. Через 0,5 с груз маятника в первый раз вернётся в положение 1.",
                        "4. Кинетическая энергия груза маятника в первый раз достигнет своего минимума через 0,5 с после начала движения.",
                        "5. При движении из положения 1 в положение 2 модуль центростремительного ускорения груза маятника уменьшается."
                    ],
                    correctAnswers: [0, 3, 4],
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Проверим утверждение 1:</div>
                            <div class="math-step" style="text-align: center;">При отсутствии сопротивления полная механическая энергия сохраняется</div>
                            <div class="math-step" style="text-align: center;">Утверждение 1 верно</div>
                            
                            <div class="math-step">2. Проверим утверждение 2:</div>
                            <div class="math-step" style="text-align: center;">T = 1/ν = 1/2 = 0,5 с</div>
                            <div class="math-step" style="text-align: center;">Период = 0,5 с ≠ 1 с — утверждение 2 неверно</div>
                            
                            <div class="math-step">3. Проверим утверждение 3:</div>
                            <div class="math-step" style="text-align: center;">Период T = 0,5 с</div>
                            <div class="math-step" style="text-align: center;">В положение 1 маятник вернется через период T = 0,5 с</div>
                            <div class="math-step" style="text-align: center;">Утверждение 3 верно</div>
                            
                            <div class="math-step">4. Проверим утверждение 4:</div>
                            <div class="math-step" style="text-align: center;">Кинетическая энергия минимальна в крайних точках</div>
                            <div class="math-step" style="text-align: center;">Из положения 1 в положение 3 — половина периода = 0,25 с</div>
                            <div class="math-step" style="text-align: center;">Первый минимум будет через 0,25 с, а не 0,5 с</div>
                            <div class="math-step" style="text-align: center;">Утверждение 4 неверно</div>
                            
                            <div class="math-step">5. Проверим утверждение 5:</div>
                            <div class="math-step" style="text-align: center;">a<sub>цс</sub> = v²/R</div>
                            <div class="math-step" style="text-align: center;">При движении из 1 в 2 скорость растет, значит a<sub>цс</sub> растет</div>
                            <div class="math-step" style="text-align: center;">Утверждение 5 неверно</div>
                            
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Правильные ответы: 1 и 3</div>
                        </div>
                    `
                },
                {
                    id: 'task4',
                    title: "Бросок тела с высоты",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Из точки, находящейся на высоте 28,8 м над горизонтальной площадкой, брошено тело массой 2 кг, начальная скорость которого направлена по горизонтали. Тело движется в плоскости XOY, уравнение его траектории имеет вид: y = 28,9 - 0,2x². В момент броска тело имело координату x = 0 м. Установите соответствие между физическими величинами и их значениями в СИ.</p>
                        
                        <p><strong>ФИЗИЧЕСКАЯ ВЕЛИЧИНА</strong></p>
                        <p>А)  модуль начальной скорости тела</p>
                        <p>Б)  время полета тела до падения на площадку</p>
                        
                        <p><strong>ЗНАЧЕНИЕ В СИ</strong></p>
                        <p>1)  2,4</p>
                        <p>2)  5</p>
                        <p>3)  12</p>
                        <p>4)  24</p>
                    `,
                    type: 'matching',
                    pairs: [
                        { question: 'А) модуль начальной скорости тела', options: ['2,4', '5', '12', '24'] },
                        { question: 'Б) время полета тела до падения на площадку', options: ['2,4', '5', '12', '24'] }
                    ],
                    correctAnswers: [2, 1], // А-3 (12), Б-1 (2,4)
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Общий вид уравнения траектории при горизонтальном броске:</div>
                            <div class="math-step" style="text-align: center;">y = H - (gx²)/(2v₀²)</div>
                            <div class="math-step">2. Сравниваем с данным уравнением:</div>
                            <div class="math-step" style="text-align: center;">y = 28,9 - 0,2x²</div>
                            <div class="math-step" style="text-align: center;">Значит: H = 28,9 м, g/(2v₀²) = 0,2</div>
                            <div class="math-step">3. Найдем начальную скорость:</div>
                            <div class="math-step" style="text-align: center;">g/(2v₀²) = 0,2</div>
                            <div class="math-step" style="text-align: center;">10/(2v₀²) = 0,2 (g ≈ 10 м/с²)</div>
                            <div class="math-step" style="text-align: center;">10/(2v₀²) = 0,2</div>
                            <div class="math-step" style="text-align: center;">5/v₀² = 0,2</div>
                            <div class="math-step" style="text-align: center;">v₀² = 5/0,2 = 25</div>
                            <div class="math-step" style="text-align: center;">v₀ = 5 м/с</div>
                            <div class="math-step" style="text-align: center;">Но в ответах нет 5, пересчитаем с g=9,8:</div>
                            <div class="math-step" style="text-align: center;">9,8/(2v₀²) = 0,2</div>
                            <div class="math-step" style="text-align: center;">4,9/v₀² = 0,2</div>
                            <div class="math-step" style="text-align: center;">v₀² = 4,9/0,2 = 24,5</div>
                            <div class="math-step" style="text-align: center;">v₀ ≈ 4,95 м/с</div>
                            <div class="math-step" style="text-align: center;">Или с g=10 и H=28,8: 10/(2v₀²)=0,2 → v₀=5</div>
                            <div class="math-step" style="text-align: center;">В уравнении H=28,9, значит g=9,8, тогда v₀=√24,5≈4,95</div>
                            <div class="math-step" style="text-align: center;">Ближайшее значение в ответах: 5 (вариант 2)</div>
                            
                            <div class="math-step">4. Найдем время полета:</div>
                            <div class="math-step" style="text-align: center;">H = gt²/2</div>
                            <div class="math-step" style="text-align: center;">28,8 = (10 × t²)/2</div>
                            <div class="math-step" style="text-align: center;">28,8 = 5t²</div>
                            <div class="math-step" style="text-align: center;">t² = 28,8/5 = 5,76</div>
                            <div class="math-step" style="text-align: center;">t = √5,76 = 2,4 с</div>
                            
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Правильные ответы: А-2 (5), Б-1 (2,4)</div>
                            <div class="math-step" style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                                Уточнение: С g=9,8: t=√(2×28,8/9,8)=√(57,6/9,8)=√5,877≈2,42 с≈2,4 с
                            </div>
                        </div>
                    `
                }
            ],
            // НОВЫЕ ЗАДАНИЯ ПО ФИЗИКЕ (Электродинамика, ЕГЭ 2026)
            'physics_ege_electro': [
                {
                    id: 'task1',
                    title: "Электризация кубиков в поле",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Стеклянные незаряженные кубики 1 и 2 и алюминиевые незаряженные кубики 3 и 4 сблизили вплотную и поместили в электрическое поле, напряженность которого направлена горизонтально вправо, как показано в левой части рисунка. Затем кубики раздвинули и уже после этого выключили электрическое поле (правая часть рисунка). Выберите все верные утверждения, описывающие данный опыт.</p>
                        
                        <div class="physics-image">
                            <img src="https://phys-ege.sdamgia.ru/get_file?id=122948" 
                                 alt="Электризация кубиков в поле" 
                                 style="filter: invert(1) brightness(2) contrast(1.2); background: transparent;">
                        </div>
                        
                        <p>1.  В электрическом поле (левая часть рисунка) часть электронов перешла из кубика 4 в кубик 3.</p>
                        <p>2.  Кубик 3, изображенный в правой части рисунка, не заряжен.</p>
                        <p>3.  В электрическом поле (левая часть рисунка) правая грань кубика 2 заряжена положительно.</p>
                        <p>4.  Кубик 4, изображенный в правой части рисунка, имеет положительный заряд.</p>
                        <p>5.  В электрическом поле (левая часть рисунка) потенциал левой грани кубика 3 больше, чем потенциал правой грани кубика 4.</p>
                    `,
                    type: 'choice-multiple',
                    options: [
                        "1. В электрическом поле (левая часть рисунка) часть электронов перешла из кубика 4 в кубика 3.",
                        "2. Кубик 3, изображенный в правой части рисунка, не заряжен.",
                        "3. В электрическом поле (левая часть рисунка) правая грань кубика 2 заряжена положительно.",
                        "4. Кубик 4, изображенный в правой части рисунка, имеет положительный заряд.",
                        "5. В электрическом поле (левая часть рисунка) потенциал левой грани кубика 3 больше, чем потенциал правой грани кубика 4."
                    ],
                    correctAnswers: [0, 2, 3],
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Анализируем ситуацию:</div>
                            <div class="math-step" style="text-align: center;">Стекло — диэлектрик, алюминий — проводник</div>
                            <div class="math-step" style="text-align: center;">В поле E направлено вправо</div>
                            
                            <div class="math-step">2. Проверим утверждение 1:</div>
                            <div class="math-step" style="text-align: center;">В проводниках (3 и 4) электроны двигаются против поля</div>
                            <div class="math-step" style="text-align: center;">Из 4 в 3 электроны переходят — утверждение 1 верно</div>
                            
                            <div class="math-step">3. Проверим утверждение 2:</div>
                            <div class="math-step" style="text-align: center;">После раздвижения и выключения поля заряды сохраняются</div>
                            <div class="math-step" style="text-align: center;">Кубик 3 имеет заряд — утверждение 2 неверно</div>
                            
                            <div class="math-step">4. Проверим утверждение 3:</div>
                            <div class="math-step" style="text-align: center;">В диэлектрике 2 происходит поляризация</div>
                            <div class="math-step" style="text-align: center;">Правая грань положительна — утверждение 3 верно</div>
                            
                            <div class="math-step">5. Проверим утверждение 4:</div>
                            <div class="math-step" style="text-align: center;">Кубик 4 потерял электроны, значит заряжен положительно</div>
                            <div class="math-step" style="text-align: center;">Утверждение 4 верно</div>
                            
                            <div class="math-step">6. Проверим утверждение 5:</div>
                            <div class="math-step" style="text-align: center;">Потенциал уменьшается вдоль поля</div>
                            <div class="math-step" style="text-align: center;">Левый край 3 имеет больший потенциал, чем правый край 4</div>
                            <div class="math-step" style="text-align: center;">Утверждение 5 верно</div>
                            
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Правильные ответы: 1, 3, 4, 5</div>
                        </div>
                    `
                },
                {
                    id: 'task2',
                    title: "Графики для собирающих линз",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Небольшой предмет располагают на расстоянии a от тонкой собирающей линзы и получают с ее помощью изображение этого предмета, расположенное на расстоянии b от линзы. На рисунке изображены графики зависимостей b от a для двух тонких собирающих линз 1 и 2.</p>
                        
                        <div class="physics-image">
                            <img src="https://phys-ege.sdamgia.ru/get_file?id=86093" 
                                 alt="Графики для собирающих линз" 
                                 style="filter: invert(1) brightness(2) contrast(1.2); background: transparent;">
                        </div>
                        
                        <p><strong>Вопрос:</strong> Какая из линз имеет большую оптическую силу?</p>
                    `,
                    type: 'choice',
                    options: [
                        "Линза 1",
                        "Линза 2",
                        "Оптические силы равны",
                        "Определить невозможно"
                    ],
                    correctAnswer: 1,
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Формула тонкой линзы:</div>
                            <div class="math-step" style="text-align: center;">1/F = 1/a + 1/b</div>
                            <div class="math-step" style="text-align: center;">Оптическая сила D = 1/F</div>
                            
                            <div class="math-step">2. Анализируем графики:</div>
                            <div class="math-step" style="text-align: center;">Когда a = F, изображение уходит в бесконечность (b → ∞)</div>
                            <div class="math-step" style="text-align: center;">На графике это точка, где кривая уходит вверх</div>
                            
                            <div class="math-step">3. Определяем фокусные расстояния:</div>
                            <div class="math-step" style="text-align: center;">Для линзы 1: a ≈ 10 см при b → ∞ ⇒ F₁ ≈ 10 см</div>
                            <div class="math-step" style="text-align: center;">Для линзы 2: a ≈ 5 см при b → ∞ ⇒ F₂ ≈ 5 см</div>
                            
                            <div class="math-step">4. Оптическая сила:</div>
                            <div class="math-step" style="text-align: center;">D₁ = 1/F₁ = 1/0,1 = 10 дптр</div>
                            <div class="math-step" style="text-align: center;">D₂ = 1/F₂ = 1/0,05 = 20 дптр</div>
                            <div class="math-step" style="text-align: center;">D₂ > D₁</div>
                            
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Линза 2 имеет большую оптическую силу</div>
                        </div>
                    `
                },
                {
                    id: 'task3',
                    title: "Однородное электростатическое поле",
                    description: `
                        <p><strong>Условие задачи:</strong></p>
                        <p>Однородное электростатическое поле создано равномерно заряженной протяженной горизонтальной пластиной. Линии напряженности поля направлены вертикально вверх.</p>
                        
                        <div class="physics-image">
                            <img src="https://phys-ege.sdamgia.ru/get_file?id=163215" 
                                 alt="Однородное электростатическое поле" 
                                 style="filter: invert(1) brightness(2) contrast(1.2); background: transparent;">
                        </div>
                        
                        <p>Из приведенного ниже списка выберите все правильные утверждения и укажите их номера.</p>
                        <p>1.  Если в точку А поместить пробный точечный отрицательный заряд, то на него со стороны пластины будет действовать сила, направленная вертикально вниз.</p>
                        <p>2.  Пластина имеет отрицательный заряд.</p>
                        <p>3.  Потенциал электростатического поля в точке В ниже, чем в точке С.</p>
                        <p>4.  Напряженность поля в точке А меньше, чем в точке С.</p>
                        <p>5.  Работа электростатического поля по перемещению пробного точечного отрицательного заряда из точки А и в точку В равна нулю.</p>
                    `,
                    type: 'choice-multiple',
                    options: [
                        "1. Если в точку А поместить пробный точечный отрицательный заряд, то на него со стороны пластины будет действовать сила, направленная вертикально вниз.",
                        "2. Пластина имеет отрицательный заряд.",
                        "3. Потенциал электростатического поля в точке В ниже, чем в точке С.",
                        "4. Напряженность поля в точке А меньше, чем в точке С.",
                        "5. Работа электростатического поля по перемещению пробного точечного отрицательного заряда из точки А и в точку В равна нулю."
                    ],
                    correctAnswers: [0, 2, 4],
                    explanation: `
                        <div class="math-explanation">
                            <p><strong>Решение:</strong></p>
                            <div class="math-step">1. Анализируем направление поля:</div>
                            <div class="math-step" style="text-align: center;">Линии напряженности направлены вверх ⇒ пластина отрицательна</div>
                            
                            <div class="math-step">2. Проверим утверждение 1:</div>
                            <div class="math-step" style="text-align: center;">На отрицательный заряд сила действует против поля</div>
                            <div class="math-step" style="text-align: center;">Поле вверх ⇒ сила вниз — утверждение 1 верно</div>
                            
                            <div class="math-step">3. Проверим утверждение 2:</div>
                            <div class="math-step" style="text-align: center;">Линии выходят из "+", входят в "-"</div>
                            <div class="math-step" style="text-align: center;">Линии вверх ⇒ пластина отрицательна — утверждение 2 верно</div>
                            
                            <div class="math-step">4. Проверим утверждение 3:</div>
                            <div class="math-step" style="text-align: center;">Потенциал убывает вдоль поля</div>
                            <div class="math-step" style="text-align: center;">Поле вверх ⇒ вверху потенциал ниже</div>
                            <div class="math-step" style="text-align: center;">В выше С ⇒ φ<sub>В</sub> < φ<sub>С</sub> — утверждение 3 верно</div>
                            
                            <div class="math-step">5. Проверим утверждение 4:</div>
                            <div class="math-step" style="text-align: center;">Поле однородное ⇒ E = const</div>
                            <div class="math-step" style="text-align: center;">E<sub>А</sub> = E<sub>С</sub> — утверждение 4 неверно</div>
                            
                            <div class="math-step">6. Проверим утверждение 5:</div>
                            <div class="math-step" style="text-align: center;">A = q(φ<sub>А</sub> - φ<sub>В</sub>)</div>
                            <div class="math-step" style="text-align: center;">φ<sub>А</sub> = φ<sub>В</sub> (горизонтальная линия)</div>
                            <div class="math-step" style="text-align: center;">A = 0 — утверждение 5 верно</div>
                            
                            <div class="math-step" style="margin-top: 1rem; font-weight: bold; color: #4CAF50;">Правильные ответы: 1, 2, 3, 5</div>
                        </div>
                    `
                }
            ]
        };

        // Функция показа уведомления
        function showNotification(message) {
            const notification = document.getElementById('notification');
            const messageEl = document.getElementById('notificationMessage');
            
            messageEl.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Переход между шагами
        function goToStep(stepNumber) {
            // Скрываем все секции
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Показываем нужную секцию
            document.getElementById(`step${stepNumber}`).classList.add('active');
            
            // Обновляем навигацию
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            
            document.querySelector(`.step[data-step="${stepNumber}"]`).classList.add('active');
        }

        // Выбор предмета
        function selectSubject(subject) {
            currentState.subject = subject;
            goToStep(2);
        }

        // Выбор уровня
        function selectLevel(level) {
            currentState.level = level;
            loadTopics();
            goToStep(3);
        }

        // Загрузка тем
        function loadTopics() {
            const topicsGrid = document.getElementById('topicsGrid');
            const topics = topicsDatabase[currentState.subject][currentState.level];
            
            topicsGrid.innerHTML = '';
            
            topics.forEach(topic => {
                const topicCard = document.createElement('div');
                topicCard.className = 'selection-card';
                topicCard.onclick = () => selectTopic(topic);
                topicCard.innerHTML = `
                    <div class="selection-icon">
                        <i class="fas fa-folder-open"></i>
                    </div>
                    <h3 class="selection-title">${topic.name}</h3>
                    <p class="selection-description">${topic.description}</p>
                `;
                topicsGrid.appendChild(topicCard);
            });
        }

        // Выбор темы
        function selectTopic(topic) {
            currentState.topic = topic;
            loadTasksList();
            goToStep(4);
        }

        // Загрузка списка заданий для темы
        function loadTasksList() {
            const taskCard = document.getElementById('taskCard');
            const tasks = tasksDatabase[currentState.topic.id];
            
            if (!tasks || tasks.length === 0) {
                taskCard.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: rgba(255,255,255,0.7);">
                        <i class="fas fa-tasks" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                        <h3>Задания пока нет</h3>
                        <p>В этой теме пока нет доступных заданий</p>
                    </div>
                `;
                return;
            }
            
            // Если это массив заданий
            if (Array.isArray(tasks)) {
                taskCard.innerHTML = `
                    <div class="task-header">
                        <div>
                            <div class="task-meta">
                                <span class="task-tag">${getSubjectName(currentState.subject)}</span>
                                <span class="task-tag ${currentState.level}">${getLevelName(currentState.level)}</span>
                                <span class="task-tag">${currentState.topic.name}</span>
                            </div>
                            <h2 class="task-title">Выберите задание</h2>
                        </div>
                    </div>

                    <div class="selection-grid" style="grid-template-columns: 1fr;">
                        ${tasks.map((task, index) => `
                            <div class="selection-card" onclick="loadTask(${index})">
                                <div class="selection-icon">
                                    <i class="fas fa-${getTaskIcon(task)}"></i>
                                </div>
                                <h3 class="selection-title">${task.title}</h3>
                                <p class="selection-description">${getTaskTypeDescription(task)}</p>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {
                // Если это одиночное задание (как в informatics_ege_networks)
                loadTask(0);
            }
        }

        // Вспомогательные функции для определения типа задания
        function getTaskIcon(task) {
            if (task.type === 'input') return 'keyboard';
            if (task.type === 'choice') return 'list';
            if (task.type === 'choice-multiple') return 'tasks';
            if (task.type === 'matching') return 'exchange-alt';
            return 'question';
        }

        function getTaskTypeDescription(task) {
            if (task.type === 'input') return 'Задание с вводом ответа';
            if (task.type === 'choice') return 'Задание с выбором одного ответа';
            if (task.type === 'choice-multiple') return 'Задание с выбором нескольких ответов';
            if (task.type === 'matching') return 'Задание на установление соответствия';
            return 'Задание';
        }

        // Загрузка конкретного задания
        function loadTask(taskIndex) {
            const taskCard = document.getElementById('taskCard');
            const tasks = tasksDatabase[currentState.topic.id];
            const task = Array.isArray(tasks) ? tasks[taskIndex] : tasks;
            
            if (!task) {
                taskCard.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: rgba(255,255,255,0.7);">
                        <i class="fas fa-tasks" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                        <h3>Задание не найдено</h3>
                        <p>Выбранное задание временно недоступно</p>
                    </div>
                `;
                return;
            }
            
            // Общая часть заголовка
            let taskHtml = `
                <div class="task-header">
                    <div>
                        <div class="task-meta">
                            <span class="task-tag">${getSubjectName(currentState.subject)}</span>
                            <span class="task-tag ${currentState.level}">${getLevelName(currentState.level)}</span>
                            <span class="task-tag">${currentState.topic.name}</span>
                            ${Array.isArray(tasks) ? `<span class="task-tag" style="background: rgba(255,165,0,0.2); color: #FFA500; border-color: #FFA500;">Задание ${taskIndex + 1} из ${tasks.length}</span>` : ''}
                        </div>
                        <h2 class="task-title">${task.title}</h2>
                        ${Array.isArray(tasks) ? `
                            <div style="margin-top: 1rem;">
                                <button class="back-button" onclick="loadTasksList()" style="margin-bottom: 0;">
                                    <i class="fas fa-arrow-left"></i>
                                    Назад к списку заданий
                                </button>
                            </div>
                        ` : ''}
                    </div>
                </div>

                <div class="task-description">
                    ${task.description}
                </div>

                <div class="answer-form">
                    <h3 style="margin-bottom: 1.5rem; color: white;">${getAnswerFormTitle(task)}</h3>
            `;
            
            // Добавляем соответствующую форму в зависимости от типа задания
            if (task.type === 'input') {
                taskHtml += `
                    <div class="answer-input-container">
                        <input type="text" class="answer-input" id="answerInput" placeholder="Введите ответ..." oninput="validateInput()">
                        <div class="input-hint">Введите только число без пробелов и других символов</div>
                    </div>

                    <button class="submit-button" id="submitButton" onclick="checkInputAnswer()" disabled>
                        <i class="fas fa-paper-plane"></i>
                        Проверить ответ
                    </button>
                `;
            } else if (task.type === 'choice') {
                taskHtml += `
                    <div class="answer-options" id="answerOptions">
                        ${task.options.map((option, index) => `
                            <label class="answer-option" onclick="selectSingleAnswer(${index})">
                                <input type="radio" name="answer" value="${index}">
                                <span class="answer-label">${option}</span>
                            </label>
                        `).join('')}
                    </div>

                    <button class="submit-button" id="submitButton" onclick="checkSingleAnswer()" disabled>
                        <i class="fas fa-paper-plane"></i>
                        Проверить ответ
                    </button>
                `;
            } else if (task.type === 'choice-multiple') {
                taskHtml += `
                    <div class="answer-options" id="answerOptions">
                        ${task.options.map((option, index) => `
                            <label class="answer-option" onclick="selectMultipleAnswer(${index})">
                                <input type="checkbox" name="answer" value="${index}">
                                <span class="answer-label">${option}</span>
                            </label>
                        `).join('')}
                    </div>

                    <button class="submit-button" id="submitButton" onclick="checkMultipleAnswer()" disabled>
                        <i class="fas fa-paper-plane"></i>
                        Проверить ответ
                    </button>
                `;
            } else if (task.type === 'matching') {
                taskHtml += `
                    <div class="matching-container" id="matchingContainer">
                        ${task.pairs.map((pair, pairIndex) => `
                            <div class="matching-pair" style="margin-bottom: 1.5rem;">
                                <div style="margin-bottom: 0.5rem; font-weight: 600;">${pair.question}</div>
                                <div class="answer-options" style="grid-template-columns: 1fr;">
                                    ${pair.options.map((option, optionIndex) => `
                                        <label class="answer-option" onclick="selectMatchingAnswer(${pairIndex}, ${optionIndex})">
                                            <input type="radio" name="matching${pairIndex}" value="${optionIndex}">
                                            <span class="answer-label">${option}</span>
                                        </label>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <button class="submit-button" id="submitButton" onclick="checkMatchingAnswer()" disabled>
                        <i class="fas fa-paper-plane"></i>
                        Проверить ответ
                    </button>
                `;
            }
            
            taskHtml += `
                    <div class="result-message" id="resultMessage">
                        <i class="fas fa-check" id="resultIcon"></i>
                        <span id="resultText"></span>
                    </div>
                </div>
            `;
            
            taskCard.innerHTML = taskHtml;
            
            // Сбрасываем состояние
            selectedAnswers = task.type === 'choice-multiple' ? [] : 
                            task.type === 'matching' ? [] : null;
            currentTask = task;
        }

        // Вспомогательные функции
        function getSubjectName(subject) {
            const subjects = {
                'math': 'Математика',
                'physics': 'Физика',
                'informatics': 'Информатика'
            };
            return subjects[subject] || subject;
        }

        function getLevelName(level) {
            const levels = {
                'oge': 'ОГЭ 2026',
                'ege': 'ЕГЭ 2026'
            };
            return levels[level] || level;
        }

        function getAnswerFormTitle(task) {
            if (task.type === 'input') return 'Введите ваш ответ:';
            if (task.type === 'choice') return 'Выберите правильный ответ:';
            if (task.type === 'choice-multiple') return 'Выберите все правильные ответы:';
            if (task.type === 'matching') return 'Установите соответствие:';
            return 'Ответьте на вопрос:';
        }

        // Глобальные переменные для хранения состояния
        let selectedAnswers = null;
        let currentTask = null;
        let matchingAnswers = [];

        // Логика для заданий с вводом ответа
        function validateInput() {
            const input = document.getElementById('answerInput');
            const submitButton = document.getElementById('submitButton');
            const value = input.value.trim();
            
            if (value && /^[\d.,\-]+$/.test(value)) {
                submitButton.disabled = false;
            } else {
                submitButton.disabled = true;
            }
        }

        function checkInputAnswer() {
            const input = document.getElementById('answerInput');
            const submitButton = document.getElementById('submitButton');
            const resultMessage = document.getElementById('resultMessage');
            const resultIcon = document.getElementById('resultIcon');
            const resultText = document.getElementById('resultText');

            const userAnswer = input.value.trim().replace(',', '.');
            const isCorrect = userAnswer === currentTask.correctAnswer.toString();

            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Проверка...';

            setTimeout(() => {
                if (isCorrect) {
                    resultMessage.className = 'result-message result-correct';
                    resultIcon.className = 'fas fa-check';
                    resultText.innerHTML = `<div style="text-align: left;">${currentTask.explanation}</div>`;
                    updateStatistics(true);
                } else {
                    resultMessage.className = 'result-message result-incorrect';
                    resultIcon.className = 'fas fa-times';
                    resultText.innerHTML = `
                        <div style="text-align: left;">
                            <p>Ваш ответ: <strong>${userAnswer}</strong></p>
                            <p>Правильный ответ: <strong>${currentTask.correctAnswer}</strong></p>
                            ${currentTask.explanation}
                        </div>
                    `;
                    updateStatistics(false);
                }
                
                resultMessage.style.display = 'block';
                submitButton.style.display = 'none';
                
            }, 1000);
        }

        // Логика для заданий с выбором одного ответа
        function selectSingleAnswer(answerIndex) {
            selectedAnswers = answerIndex;
            
            document.querySelectorAll('.answer-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            event.currentTarget.classList.add('selected');
            document.getElementById('submitButton').disabled = false;
        }

        function checkSingleAnswer() {
            if (selectedAnswers === null) {
                showNotification('Пожалуйста, выберите ответ');
                return;
            }

            const submitButton = document.getElementById('submitButton');
            const resultMessage = document.getElementById('resultMessage');
            const resultIcon = document.getElementById('resultIcon');
            const resultText = document.getElementById('resultText');

            const isCorrect = selectedAnswers === currentTask.correctAnswer;

            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Проверка...';

            setTimeout(() => {
                if (isCorrect) {
                    resultMessage.className = 'result-message result-correct';
                    resultIcon.className = 'fas fa-check';
                    resultText.innerHTML = `<div style="text-align: left;">${currentTask.explanation}</div>`;
                    updateStatistics(true);
                } else {
                    resultMessage.className = 'result-message result-incorrect';
                    resultIcon.className = 'fas fa-times';
                    const correctOption = currentTask.options[currentTask.correctAnswer];
                    resultText.innerHTML = `
                        <div style="text-align: left;">
                            <p>Правильный ответ: <strong>${correctOption}</strong></p>
                            ${currentTask.explanation}
                        </div>
                    `;
                    updateStatistics(false);
                }
                
                resultMessage.style.display = 'block';
                submitButton.style.display = 'none';
                
            }, 1000);
        }

        // Логика для заданий с выбором нескольких ответов
        function selectMultipleAnswer(answerIndex) {
            if (!selectedAnswers) selectedAnswers = [];
            
            const checkbox = event.currentTarget.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            
            if (checkbox.checked) {
                if (!selectedAnswers.includes(answerIndex)) {
                    selectedAnswers.push(answerIndex);
                }
            } else {
                const index = selectedAnswers.indexOf(answerIndex);
                if (index > -1) {
                    selectedAnswers.splice(index, 1);
                }
            }
            
            event.currentTarget.classList.toggle('selected');
            
            const submitButton = document.getElementById('submitButton');
            submitButton.disabled = selectedAnswers.length === 0;
        }

        function checkMultipleAnswer() {
            if (!selectedAnswers || selectedAnswers.length === 0) {
                showNotification('Пожалуйста, выберите хотя бы один ответ');
                return;
            }

            const submitButton = document.getElementById('submitButton');
            const resultMessage = document.getElementById('resultMessage');
            const resultIcon = document.getElementById('resultIcon');
            const resultText = document.getElementById('resultText');

            // Сортируем массивы для сравнения
            const userAnswers = selectedAnswers.slice().sort();
            const correctAnswers = currentTask.correctAnswers.slice().sort();
            
            const isCorrect = JSON.stringify(userAnswers) === JSON.stringify(correctAnswers);

            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Проверка...';

            setTimeout(() => {
                if (isCorrect) {
                    resultMessage.className = 'result-message result-correct';
                    resultIcon.className = 'fas fa-check';
                    resultText.innerHTML = `<div style="text-align: left;">${currentTask.explanation}</div>`;
                    updateStatistics(true);
                } else {
                    resultMessage.className = 'result-message result-incorrect';
                    resultIcon.className = 'fas fa-times';
                    const correctOptions = currentTask.correctAnswers.map(idx => currentTask.options[idx]).join('<br>');
                    resultText.innerHTML = `
                        <div style="text-align: left;">
                            <p>Правильные ответы:</p>
                            <p><strong>${correctOptions}</strong></p>
                            ${currentTask.explanation}
                        </div>
                    `;
                    updateStatistics(false);
                }
                
                resultMessage.style.display = 'block';
                submitButton.style.display = 'none';
                
            }, 1000);
        }

        // Логика для заданий на соответствие
        function selectMatchingAnswer(pairIndex, optionIndex) {
            if (!matchingAnswers[pairIndex]) {
                matchingAnswers[pairIndex] = optionIndex;
            } else {
                matchingAnswers[pairIndex] = optionIndex;
            }
            
            // Снимаем выделение со всех вариантов в этой паре
            const pairContainer = event.currentTarget.closest('.matching-pair');
            pairContainer.querySelectorAll('.answer-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Выделяем выбранный вариант
            event.currentTarget.classList.add('selected');
            
            // Проверяем, все ли пары заполнены
            const submitButton = document.getElementById('submitButton');
            const allFilled = matchingAnswers.length === currentTask.pairs.length && 
                            matchingAnswers.every(answer => answer !== undefined);
            submitButton.disabled = !allFilled;
        }

        function checkMatchingAnswer() {
            const submitButton = document.getElementById('submitButton');
            const resultMessage = document.getElementById('resultMessage');
            const resultIcon = document.getElementById('resultIcon');
            const resultText = document.getElementById('resultText');

            const isCorrect = JSON.stringify(matchingAnswers) === JSON.stringify(currentTask.correctAnswers);

            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Проверка...';

            setTimeout(() => {
                if (isCorrect) {
                    resultMessage.className = 'result-message result-correct';
                    resultIcon.className = 'fas fa-check';
                    resultText.innerHTML = `<div style="text-align: left;">${currentTask.explanation}</div>`;
                    updateStatistics(true);
                } else {
                    resultMessage.className = 'result-message result-incorrect';
                    resultIcon.className = 'fas fa-times';
                    let correctAnswersText = '';
                    currentTask.correctAnswers.forEach((answerIdx, pairIdx) => {
                        correctAnswersText += `<p><strong>${currentTask.pairs[pairIdx].question}</strong>: ${currentTask.pairs[pairIdx].options[answerIdx]}</p>`;
                    });
                    resultText.innerHTML = `
                        <div style="text-align: left;">
                            <p>Правильные ответы:</p>
                            ${correctAnswersText}
                            ${currentTask.explanation}
                        </div>
                    `;
                    updateStatistics(false);
                }
                
                resultMessage.style.display = 'block';
                submitButton.style.display = 'none';
                
            }, 1000);
        }

        function updateStatistics(isCorrect) {
            let statistics = JSON.parse(localStorage.getItem('userStatistics') || '{}');
            
            if (!statistics.tasks) {
                statistics.tasks = {
                    completed: 0,
                    correct: 0,
                    totalPoints: 0
                };
            }
            
            statistics.tasks.completed += 1;
            if (isCorrect) {
                statistics.tasks.correct += 1;
                statistics.tasks.totalPoints += 10;
            }
            
            localStorage.setItem('userStatistics', JSON.stringify(statistics));
        }

        // Добавляем возможность использовать клавиши 1-4 для выбора ответа
        document.addEventListener('keydown', function(event) {
            if (event.key >= '1' && event.key <= '4') {
                const answerIndex = parseInt(event.key) - 1;
                const activeSection = document.querySelector('.section.active');
                if (activeSection && activeSection.id === 'step4') {
                    selectSingleAnswer(answerIndex);
                }
            }
        });
    </script>
</body>
</html>
